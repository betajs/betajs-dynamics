<html>
<head>
    <script src="../node_modules/betajs-scoped/dist/scoped.js"></script>
    <script src="../node_modules/betajs/dist/beta-noscoped.js"></script>
    <script src="../node_modules/betajs-browser/dist/betajs-browser-noscoped.js"></script>
    <script src="../dist/betajs-dynamics-noscoped.js"></script>
</head>
<body>

<textarea value="{{=primary}}" cols="40" rows="20"></textarea>
<textarea value="{{=secondary}}" cols="40" rows="20"></textarea>
<textarea value="{{output}}"  cols="40" rows="20" readonly></textarea>

<script>
    BetaJS.Dynamics.Dynamic.activate({
        element: document.body,
        attrs: {
            primary: "",
            secondary: "",
            output: ""
        },
        computed: {
            "output:primary,secondary": function () {
                try {
                    return JSON.stringify(BetaJS.Objs.diff(JSON.parse(this.get("primary")), JSON.parse(this.get("secondary"))));
                } catch (e) {
                    return e;
                }
            }
        }
    });
</script>

</body>
</html>