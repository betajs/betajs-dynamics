<html>
	<head>
		<script src="assets/jquery.js"></script>
		<script src="assets/beta.js"></script>
		<script src="assets/beta-browser.js"></script>
		<script src="../dist/betajs-dynamics.js"></script>
	</head>
	<body>
		<style>
			.a {background-color: blue}
			.b {background-color: red}
			.c {border: 10px solid green}
		</style>
		<script type="text/template" id="cute">
			<div style="border: 1px solid green">
				<p>I am as cute as a button</p>
				<button>{{title}}</button> {{other}}
				<input type="text" value="{{=title}}" />
			</div>
		</script>
		<script type="text/template" id="foobar">
			<div style="background: red">
				Foobarina: {{title}} {{other}}
			</div>
		</script>
		<div id="go">
			<ba-statusbar ba-status="{{=text}}">
			</ba-statusbar>
			<input type="text" value="{{=dir}}" />
			<button ba-click="yes = !yes">Click me (direct code)</button>
			<button ba-click="gogo()">Click me (method)</button>
			<p ba-class="{{{a: yes, c: yo}}}">
				This is the {{text}}.
			</p>
			<p ba-if="{{showing}}" class="{{superclass}}">
				Yo: {{text + " -- " + text}}
			</p>
			<ba-statusbar>
			</ba-statusbar>
			<input type="text" class="{{superclass}}" value="{{=text}}" />
			<ul ba-repeat="{{item :: items}}">
				<li>{{item}}<ul ba-repeat="{{inner :: item}}">
					<li>Go now: {{text}} -- {{item}} -- {{inner}} <input type="text" class="{{superclass}}" value="{{=text}}" /></li>
				</ul></li>
				<li>And even a second item: {{text}}</li>
			</ul>
			<ul ba-repeat="{{sub :: subs}}">
				<li>test: {{sub.key}} <input type="text" value="{{=sub.key}}" /></li>
			</ul>
			<ul ba-repeat="{{sub :: subs}}">
				<ba-{{dir}} ba-title="{{=sub.key}}">
				</ba-{{dir}}>
			</ul>
		</div>
		<script>
			BetaJS.Dynamics.Dynamic.extend("BetaJS.Dynamics.StatusBar", {
				templateUrl: "status_bar_template.html",
				initial: {
					data: {
						label: "statusbb"
					},
					create: function () {
					},
					functions: {
						message: function (text) {
							this.set("status", text);
							document.title = text;
						}
					},
					scopes: {
						my_parent: "<"
					},
					bind: {
						other: "<:dir"
					}
				}
			}).register("ba-statusbar");
			BetaJS.Dynamics.Dynamic.extend("BetaJS.Dynamics.CuteHandler", {
				template: $("#cute").html()
			}).register("ba-cute");
			BetaJS.Dynamics.Dynamic.extend("BetaJS.Dynamics.FoobarHandler", {
				template: $("#foobar").html()
			}).register("ba-foobar");
		
			var mainDynamic = new BetaJS.Dynamics.Dynamic({
				element: $("#go").get(0),
			});
			mainDynamic.setAll({
				text: "Hello World",
				showing: true,
				yes: false,
				yo: false,
				dir: "foobar",
				items: [[1,2],[2,3],[3,4]],
				subs: new BetaJS.Collections.Collection({objects: [
					{ key: "abc" },
					{ key: "def" }
				]})
			});
			mainDynamic.activate();
			mainDynamic.define("gogo", function () {
				this.set("yo", !this.get("yo"));
			});
			mainDynamic.set("text", "abc");
			
			var statusbar = mainDynamic.scope(">[label='statusbb']");
			statusbar.freeze();
			statusbar.call("message", "test test test");
		</script>
	</body>
</html>