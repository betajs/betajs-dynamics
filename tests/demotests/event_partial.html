<html>
    <head>
        <link rel="stylesheet" href="../assets/styles.css">

        <script src="../assets/jquery.js"></script>
        <script src="../../vendors/beta.js"></script>
        <script src="../../vendors/beta-browser-noscoped.js"></script>
        <script src="../../dist/betajs-dynamics.js"></script>
    </head>
    <body>

        <test>
            <innertest ba-event:innerevent="outerhandler"></innertest>
        </test>

        <script>
        
            BetaJS.Dynamics.Dynamic.extend(null, {
                template:
                        '<button ba-click="click()">Click</button>',
                initial : {
                    functions : {
                        click : function () {
                            this.trigger("innerevent");
                        }
                    }
                }
            }).register("innertest");

            var main = new BetaJS.Dynamics.Dynamic({
                element: $("test"),
                functions: {
                    outerhandler: function () {
                        this.set("triggered", true);
                    }
                },
                attrs: {
                    triggered: false
                }
            });

            main.activate();

            function test() {
            	QUnit.equal(main.get("triggered"), false);
                $("test button").click();
                QUnit.equal(main.get("triggered"), true);
            }
        </script>

    </body>
</html>