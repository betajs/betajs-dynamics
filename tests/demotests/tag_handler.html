<html>
<head>
    <link rel="stylesheet" href="../assets/styles.css">

    <script src="../assets/jquery.js"></script>
    <script src="../assets/beta.js"></script>
    <script src="../assets/beta-browser.js"></script>
    <script src="../../dist/betajs-dynamics.js"></script>
</head>
<body>

<test>
	<ba-{{handler}} ba-click="clicker++">
	</ba-{{handler}}>
	<ba-{{replacer}}>
		{{inner}}
	</ba-{{replacer}}>
</test>

<script>

    var root = $("test");

    var dynamic = new BetaJS.Dynamics.Dynamic({
        element: root,
        attrs: {
            handler: "test",
            replacer: "foobar",
            inner: "content",
            clicker: 1
        }
    });
    dynamic.activate();

    function test() {
        QUnit.equal(!!root.find("ba-test").get(0), true);
        QUnit.equal(!!root.find("ba-foo").get(0), false);
        dynamic.set("handler", "foo");
        QUnit.equal(!!root.find("ba-test").get(0), false);
        QUnit.equal(!!root.find("ba-foo").get(0), true);
        root.find("ba-foo").click();
        QUnit.equal(dynamic.get("clicker"), 2);
        
        QUnit.equal(!!root.find("ba-foobar").get(0), true);
        QUnit.equal(root.find("ba-foobar").html().trim(), "content");
    }
</script>

</body>
</html>