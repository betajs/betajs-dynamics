<html>
	<head>
		<script src="../assets/jquery.js"></script>
		<script src="../assets/beta.js"></script>
		<script src="../assets/beta-browser.js"></script>
		<script src="../../dist/betajs-dynamics.js"></script>
	</head>
	<body>

		<test>

			<input value="{{=value}}">
			<div>Value Outer : {{=value}}</div>

			</br>

			<ba-inner ba-inject="{{=value}}"
					  ba-internal_property="{{=internal_property}}"
					  ba-external_property="{{=external_property}}"
					></ba-inner>
			</br>

			Property Array:
			<div ba-repeat="{{prop :: property_array}}">
				<div>Hi</div>
				<div>{{prop.v}}</div>
			</div>

			</br>

			Array:
			{{=value}}
			<ul ba-repeat="{{item :: array_items}}">
				<li>Hi</li>
				<li>{{item}}</li>
			</ul>

			</br>

			<button ba-click="change_props()">Change Property</button>

		</test>

		<script>
			var root = $("test");
			var external_property = new BetaJS.Properties.Properties({v : "This is an External Property"});
			var external_property_array = [external_property];
			var outer = new BetaJS.Dynamics.Dynamic({
				element: root.get(0),
				attrs: {
					array_items: ["A","B","C"],
					internal_property: new BetaJS.Properties.Properties({v : "This is an Internal Property"}),
					property_array: external_property_array,
					value: "This is a String"
				},
				create: function () {
					console.log(this.get("property_array"));
					this.set("external_property", external_property_array[0]);
				},
				functions: {
					change_props : function (){
						this.get("internal_property").set("v","New Internal Property Value");
						external_property.set("v","New External Property Value");
					}
				}
			});

			BetaJS.Dynamics.Dynamic.extend("BetaJS.Dynamics.Inject", {
				template: 	"<div>Value inner : " +
								"<div>String: {{=inject}}</div>" +
								"<div>Internal Property: {{=internal_property.v}}</div>" +
								"<div>External Property: {{=external_property.v}}</div>" +
							"</div>"
			}).register("ba-inner");

			outer.activate();

			function test() {

				outer.set("value", "Hello");
//				QUnit.equal(root.find("span").html().trim(), outer.get("value"));

			}			
		</script>

	</body>
</html>